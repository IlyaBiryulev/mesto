(()=>{"use strict";var t={d:(e,r)=>{for(var n in r)t.o(r,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:r[n]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)};function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e(t)}function r(t,r){for(var n=0;n<r.length;n++){var o=r[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(void 0,i=function(t,r){if("object"!==e(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,"string");if("object"!==e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(o.key),"symbol"===e(i)?i:String(i)),o)}var i}t.d({},{L:()=>nt});var n=function(){function t(e){var r=e.baseUrl,n=e.headers;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._baseUrl=r,this._headers=n}var e,n;return e=t,(n=[{key:"_getResponce",value:function(t){return t.ok?t.json():Promise.reject("Ошибка: ".concat(t.status))}},{key:"getUserInfo",value:function(){var t=this,e=this._baseUrl+"/users/me";return fetch(e,{headers:this._headers}).then((function(e){return t._getResponce(e)}))}},{key:"getInitialCards",value:function(){var t=this,e=this._baseUrl+"/cards";return fetch(e,{headers:this._headers}).then((function(e){return t._getResponce(e)}))}},{key:"addCard",value:function(t){var e=this,r=this._baseUrl+"/cards";return fetch(r,{method:"POST",headers:this._headers,body:JSON.stringify({name:t["caption-input"],link:t["link-input"]})}).then((function(t){return e._getResponce(t)}))}},{key:"deleteCard",value:function(t){var e=this,r=this._baseUrl+"/cards/".concat(t);return fetch(r,{method:"DELETE",headers:this._headers}).then((function(t){return e._getResponce(t)}))}},{key:"putCardLike",value:function(t){var e=this,r=this._baseUrl+"/cards/".concat(t,"/likes");return fetch(r,{method:"PUT",headers:this._headers}).then((function(t){return e._getResponce(t)}))}},{key:"deleteCardLike",value:function(t){var e=this,r=this._baseUrl+"/cards/".concat(t,"/likes");return fetch(r,{method:"DELETE",headers:this._headers}).then((function(t){return e._getResponce(t)}))}},{key:"editProfile",value:function(t){var e=this,r=this._baseUrl+"/users/me";return fetch(r,{method:"PATCH",headers:this._headers,body:JSON.stringify({name:"".concat(t.name),about:"".concat(t.job)})}).then((function(t){return e._getResponce(t)}))}},{key:"updateAvatar",value:function(t){var e=this,r=this._baseUrl+"/users/me/avatar";return fetch(r,{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:"".concat(t.avatar)})}).then((function(t){return e._getResponce(t)}))}}])&&r(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,i=function(t,e){if("object"!==o(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===o(i)?i:String(i)),n)}var i}var u=function(){function t(e,r,n,o){var i=o.handleCardClick,u=o.handleCardDelete,a=o.handleLikeClick;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._name=e.name,this._link=e.link,this._likes=e.likes,this._id=e._id,this._userId=n,this._ownerId=e.owner._id,this._templateSelector=r,this._handleCardClick=i,this._handleCardDelete=u,this._handleLikeClick=a}var e,r;return e=t,(r=[{key:"_getTemplate",value:function(){return document.querySelector(this._templateSelector).content.querySelector(".photo-grid__item").cloneNode(!0)}},{key:"generateCard",value:function(){return this.element=this._getTemplate(),this._title=this.element.querySelector(".photo-grid__title"),this._likeButton=this.element.querySelector(".photo-grid__like"),this._deleteButton=this.element.querySelector(".photo-grid__delete-btn"),this._cardImg=this.element.querySelector(".photo-grid__image"),this._cardLikeCounter=this.element.querySelector(".photo-grid__like-counter"),this._title.textContent=this._name,this._cardImg.src=this._link,this._cardImg.alt=this._name,this._cardLikeCounter.textContent=this._likes.length,this._toggleCardLike(),this._setEventListeners(),this.element}},{key:"_setEventListeners",value:function(){var t=this;this._cardImg.addEventListener("click",(function(){t._handleCardClick(t._name,t._link)})),this._likeButton.addEventListener("click",(function(){t._handleLikeClick(t._id)})),this._userId!==this._ownerId?this._deleteButton.remove():this._deleteButton.addEventListener("click",(function(){t._handleCardDelete(t._id)}))}},{key:"putCardLikeButton",value:function(){this._likeButton.classList.add("photo-grid__like_active"),this.isLiked=!0}},{key:"dislikeCardLikeButton",value:function(){this._likeButton.classList.remove("photo-grid__like_active"),this.isLiked=!1}},{key:"_toggleCardLike",value:function(){var t=this;this._likes.find((function(e){return e._id===t._userId}))?this.putCardLikeButton():this.dislikeCardLikeButton()}},{key:"handleCardLikeCounter",value:function(t){this._cardLikeCounter.textContent=t.length}},{key:"deleteCard",value:function(){this.element.remove(),this.element=null}}])&&i(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}function c(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,l(n.key),n)}}function l(t){var e=function(t,e){if("object"!==a(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===a(e)?e:String(e)}var s=function(){function t(e,r){var n,o,i,u=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,i=function(){u._setEventListeners()},(o=l(o="enableValidation"))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i,this._formElement=r,this._inputSelector=e.inputSelector,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._inactiveButtonClass=e.inactiveButtonClass,this._inputList=Array.from(this._formElement.querySelectorAll(this._inputSelector)),this._buttonElement=this._formElement.querySelector(e.submitButtonSelector)}var e,r;return e=t,(r=[{key:"_showInputError",value:function(t,e){var r=this._formElement.querySelector(".".concat(t.id,"-error"));t.classList.add(this._inputErrorClass),r.textContent=e,r.classList.add(this._errorClass)}},{key:"_hideInputError",value:function(t){var e=this._formElement.querySelector(".".concat(t.id,"-error"));t.classList.remove(this._inputErrorClass),e.classList.remove(this._errorClass),e.textContent=""}},{key:"_checkInputValidity",value:function(t){t.validity.valid?this._hideInputError(t):this._showInputError(t,t.validationMessage)}},{key:"_hasInvalidInput",value:function(){return this._inputList.some((function(t){return!t.validity.valid}))}},{key:"toggleButtonState",value:function(){this._hasInvalidInput()?(this._buttonElement.classList.add(this._inactiveButtonClass),this._buttonElement.disabled="disable"):(this._buttonElement.classList.remove(this._inactiveButtonClass),this._buttonElement.disabled="")}},{key:"resetValidation",value:function(){var t=this;this.toggleButtonState(),this._inputList.forEach((function(e){t._hideInputError(e)}))}},{key:"_setEventListeners",value:function(){var t=this;this.toggleButtonState(),this._inputList.forEach((function(e){e.addEventListener("input",(function(){t._checkInputValidity(e),t.toggleButtonState()}))}))}}])&&c(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function f(t){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},f(t)}function p(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==f(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==f(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===f(o)?o:String(o)),n)}var o}var y=function(){function t(e,r){var n=e.renderer;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._renderer=n,this._container=document.querySelector(r)}var e,r;return e=t,(r=[{key:"addItem",value:function(t){this._container.append(t)}},{key:"renderItems",value:function(t){var e=this;t.forEach((function(t){e._renderer(t)}))}}])&&p(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}(),d=document.querySelector(".popup__form"),h=d.querySelector(".popup__form-edit_substitution_name"),v=d.querySelector(".popup__form-edit_substitution_about-me"),m=document.querySelector(".popup__form_update-avatar"),b=m.querySelector(".popup__form-edit_udate-link"),_=document.querySelector(".popup__form_add"),g=document.querySelector(".profile"),S=g.querySelector(".profile__edit-button"),k=g.querySelector(".profile__add-button"),w=g.querySelector(".profile__avatar-update-button"),C=document.querySelector(".photo-grid"),E={formSelector:".popup__form",inputSelector:".popup__form-edit",submitButtonSelector:".popup__submit-button",inactiveButtonClass:"popup__submit-button_disabled",inputErrorClass:"popup__form_input_type_error",errorClass:"popup__form-error_active"};function j(t){return j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},j(t)}function O(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==j(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==j(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===j(o)?o:String(o)),n)}var o}var L=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._popup=document.querySelector(e),this._handleEscClose=this._handleEscClose.bind(this)}var e,r;return e=t,(r=[{key:"open",value:function(){this._popup.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose)}},{key:"close",value:function(){this._popup.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose)}},{key:"_handleEscClose",value:function(t){"Escape"===t.key&&this.close()}},{key:"setEventListeners",value:function(){var t=this;this._popup.querySelector(".popup__close-button").addEventListener("click",(function(){t.close()})),this._popup.addEventListener("click",(function(e){e.target===e.currentTarget&&t.close()}))}}])&&O(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function P(t){return P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},P(t)}function I(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==P(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==P(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===P(o)?o:String(o)),n)}var o}function R(){return R="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=T(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},R.apply(this,arguments)}function T(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=U(t)););return t}function q(t,e){return q=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},q(t,e)}function B(t,e){if(e&&("object"===P(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function U(t){return U=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},U(t)}var x=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&q(t,e)}(u,t);var e,r,n,o,i=(n=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=U(n);if(o){var r=U(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return B(this,t)});function u(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(e=i.call(this,t))._popupCardImg=document.querySelector(".popup__image"),e._popupCardTitle=document.querySelector(".popup__img-description"),e}return e=u,(r=[{key:"open",value:function(t,e){this._popupCardTitle.textContent=t,this._popupCardImg.src=e,this._popupCardImg.alt=t,R(U(u.prototype),"open",this).call(this)}}])&&I(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),u}(L);function F(t){return F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},F(t)}function A(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==F(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==F(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===F(o)?o:String(o)),n)}var o}function D(){return D="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=V(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},D.apply(this,arguments)}function V(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=H(t)););return t}function N(t,e){return N=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},N(t,e)}function J(t,e){if(e&&("object"===F(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function H(t){return H=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},H(t)}var z=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&N(t,e)}(u,t);var e,r,n,o,i=(n=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=H(n);if(o){var r=H(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return J(this,t)});function u(t,e){var r,n=t.handleFormSubmit;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(r=i.call(this,e))._handleFormSubmit=n,r._popupForm=r._popup.querySelector(".popup__form"),r._popupInputs=r._popupForm.querySelectorAll(".popup__form-edit"),r._popupSubmitButton=r._popup.querySelector(".popup__submit-button"),r}return e=u,(r=[{key:"_getInputValues",value:function(){var t={};return this._popupInputs.forEach((function(e){var r=e.name,n=e.value;t[r]=n})),t}},{key:"setEventListeners",value:function(){var t=this;D(H(u.prototype),"setEventListeners",this).call(this),this._popupForm.addEventListener("submit",(function(e){e.preventDefault(),t._handleFormSubmit(t._getInputValues())}))}},{key:"close",value:function(){D(H(u.prototype),"close",this).call(this),this._popupForm.reset()}},{key:"rendererLoading",value:function(t){this._popupSubmitButton.textContent=t?"Сохранение...":"Сохранение"}}])&&A(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),u}(L);function M(t){return M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},M(t)}function G(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==M(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==M(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===M(o)?o:String(o)),n)}var o}var K=function(){function t(e){var r=e.profileNameSelector,n=e.profileJobSelector,o=e.profileAvatarSelector;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._name=document.querySelector(r),this._job=document.querySelector(n),this._avatar=document.querySelector(o)}var e,r;return e=t,(r=[{key:"getUserInfo",value:function(){return{name:this._name.textContent,job:this._job.textContent}}},{key:"getUserAvatar",value:function(){return{avatar:this._avatar.src}}},{key:"setUserAvatar",value:function(t){this._avatar.src=t}},{key:"setUserInfo",value:function(t,e,r){this._name.textContent=t,this._job.textContent=e,r&&(this._userId=r)}},{key:"getUserId",value:function(){return this._userId}}])&&G(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Q(t){return Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Q(t)}function W(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==Q(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==Q(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===Q(o)?o:String(o)),n)}var o}function X(){return X="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=Y(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},X.apply(this,arguments)}function Y(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=tt(t)););return t}function Z(t,e){return Z=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Z(t,e)}function $(t,e){if(e&&("object"===Q(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function tt(t){return tt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},tt(t)}var et=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Z(t,e)}(u,t);var e,r,n,o,i=(n=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=tt(n);if(o){var r=tt(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return $(this,t)});function u(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(e=i.call(this,t))._popupForm=e._popup.querySelector(".popup__form"),e}return e=u,(r=[{key:"setEventListeners",value:function(){var t=this;X(tt(u.prototype),"setEventListeners",this).call(this),this._popupForm.addEventListener("submit",(function(e){e.preventDefault(),t._handleFormSubmit()}))}},{key:"handleFormSubmit",value:function(t){this._handleFormSubmit=t}}])&&W(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),u}(L),rt=new n({baseUrl:"https://mesto.nomoreparties.co/v1/cohort-59",headers:{authorization:"34b33043-5140-4391-8d43-660bc14ee8a8","Content-Type":"application/json"}}),nt=function(t){var e=new u(t,".cards-template",it.getUserId(),{handleCardClick:function(t,e){lt.open(t,e)},handleCardDelete:function(t){st.open(),st.handleFormSubmit((function(){rt.deleteCard(t).then((function(){e.deleteCard(),st.close()})).catch((function(t){console.log(t)}))}))},handleLikeClick:function(t){e.isLiked?rt.deleteCardLike(t).then((function(t){e.dislikeCardLikeButton(),e.handleCardLikeCounter(t.likes)})).catch((function(t){console.log(t)})):rt.putCardLike(t).then((function(t){e.putCardLikeButton(),e.handleCardLikeCounter(t.likes)})).catch((function(t){console.log(t)}))}});return e.generateCard()},ot=new y({renderer:function(t){ot.addItem(nt(t))}},".photo-grid");Promise.all([rt.getUserInfo(),rt.getInitialCards()]).then((function(t){it.setUserInfo(t[0].name,t[0].about,t[0]._id),it.setUserAvatar(t[0].avatar),ot.renderItems(t[1])})).catch((function(t){console.log(t)}));var it=new K({profileNameSelector:".profile__name",profileJobSelector:".profile__about-me",profileAvatarSelector:".profile__image"}),ut=new z({handleFormSubmit:function(t){ut.rendererLoading(!0),rt.updateAvatar(t).then((function(t){it.setUserAvatar(t.avatar),ut.close()})).catch((function(t){console.log(t)})).finally((function(){ut.rendererLoading(!1)}))}},".popup_update-avatar");ut.setEventListeners(),w.addEventListener("click",(function(){var t=it.getUserAvatar();console.log(t),function(t){b.value=t.avatar}(t),dt.resetValidation(),ut.open()}));var at=new z({handleFormSubmit:function(t){at.rendererLoading(!0),rt.editProfile(t).then((function(t){it.setUserInfo(t.name,t.about),at.close()})).catch((function(t){console.log(t)})).finally((function(){at.rendererLoading(!1)}))}},".profile-popup");at.setEventListeners(),S.addEventListener("click",(function(){var t;t=it.getUserInfo(),h.value=t.name,v.value=t.job,pt.resetValidation(),at.open()}));var ct=new z({handleFormSubmit:function(t){ct.rendererLoading(!0),rt.addCard(t).then((function(t){!function(t){C.prepend(nt(t))}(t),ct.close()})).catch((function(t){console.log(t)})).finally((function(){ct.rendererLoading(!1)}))}},".popup_add-cards");ct.setEventListeners(),k.addEventListener("click",(function(){yt.resetValidation(),ct.open()}));var lt=new x(".popup_open-img");lt.setEventListeners();var st=new et(".popup_confirmation-delete");st.setEventListeners();var ft=function(t){return new s(E,t)},pt=ft(d);pt.enableValidation(d);var yt=ft(_);yt.enableValidation(_);var dt=ft(m);dt.enableValidation(m)})();